
<div class="container">
    <div class="row mb-2">
        <div class="col-md-12">
            <mat-card class="page-header-accent">
                <mat-card-content class="d-flex justify-content-between">
                    <h3>
                        Paychecks
                    </h3>

                    <!-- FILTERING/CONTROLS AREA
                    <div>
                        <mat-slide-toggle 
                            [checked]="showClosed" 
                            (change)="switchDisplay()"
                            class="my-0 mr-2"
                        >
                            Show Closed
                        </mat-slide-toggle>
                        <button type="button" mat-stroked-button color="primary" (click)="addPayCycle()">
                            <mat-icon inline="true">add</mat-icon>
                            <span>Payroll</span>
                        </button>
                    </div> -->
                    <!-- <div>
                        <mat-form-field class="w-100">
                            <input matInput 
                                placeholder="Search Agents" 
                                aria-label="Search Agents" 
                                [matAutoComplete]="searchAgents" 
                                [formControl]="searchAgentsCtrl" />
                            <mat-autocomplete #searchAgents="matAutocomplete">
                                <mat-option *ngFor=""></mat-option>
                            </mat-autocomplete>
                        </mat-form-field>
                    </div> -->
                    <ng-container *ngIf="startDate != null && endDate != null">
                        <p class="text-muted font-italic m-0 p-0">Displaying paychecks from {{startDate | date:'shortDate'}} to {{endDate | date:'shortDate'}}.</p>
                    </ng-container>
                </mat-card-content>
            </mat-card>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <mat-form-field class="ml-2">
                <input type="text" 
                    matInput 
                    placeholder="Filter"
                    (keyup)="filterTable($event.target.value)" />
            </mat-form-field>
        </div>  
    </div>

    <div class="row">
        <!-- <ng-container *ngLet="paychecks$|async as paychecks"> -->
            <div class="col-md-12">
                <div class="mat-elevation-z2">
                    <mat-table [dataSource]="paychecks$" matSort (matSortChange)="sortTable($event)">
                        <ng-container matColumnDef="agentName">
                            <mat-header-cell *matHeaderCellDef mat-sort-header>Name</mat-header-cell>
                            <mat-cell *matCellDef="let item">{{item.agent.firstName}} {{item.agent.lastName}}</mat-cell>
                        </ng-container>

                        <ng-container matColumnDef="weekEnding">
                            <mat-header-cell *matHeaderCellDef mat-sort-header>Invoice Date</mat-header-cell>
                            <mat-cell *matCellDef="let item">{{item.payroll.weekEnding | date:'mediumDate'}}</mat-cell>
                        </ng-container>

                        <ng-container matColumnDef="campaign">
                            <mat-header-cell *matHeaderCellDef mat-sort-header>Campaign</mat-header-cell>
                            <mat-cell *matCellDef="let item">{{item.payroll.campaign.name}}</mat-cell>
                        </ng-container>

                        <ng-container matColumnDef="amount">
                            <mat-header-cell *matHeaderCellDef mat-sort-header>Amount</mat-header-cell>
                            <mat-cell *matCellDef="let item">{{item.grossTotal | currency}}</mat-cell>
                        </ng-container>

                        <mat-header-row *matHeaderRowDef="['agentName', 'weekEnding', 'campaign', 'amount']"></mat-header-row>
                        <mat-row *matRowDef="let row; columns:['agentName', 'weekEnding', 'campaign', 'amount']"></mat-row>
                    </mat-table>
                    <mat-paginator
                        #paging
                        [pageSize]="5"
                        [pageSizeOptions]="[1, 5, 10, 25]"
                        showFirstLastButtons="true"
                        (page)="getPaychecks()"
                    ></mat-paginator>
                </div>
            </div>
        <!-- </ng-container> -->
    </div>

    

    <!-- <div class="row mt-3">
        <div class="col-md-12">
            <mat-card class="paginator p-0">
                <mat-card-content>
                    <ng-container>
                        
                    </ng-container>
                </mat-card-content>
            </mat-card>
        </div>
    </div> -->
</div>